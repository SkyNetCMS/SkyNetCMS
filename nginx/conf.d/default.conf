# ============================================
# SkyNetCMS - Default Server Configuration
# ============================================

server {
    listen 80;
    server_name _;

    # ----------------------------------------
    # Health check endpoint
    # ----------------------------------------
    location /health {
        access_log off;
        return 200 'OK';
        add_header Content-Type text/plain;
    }

    # ----------------------------------------
    # Static content from built site
    # ----------------------------------------
    location / {
        root /data/repo/dist;
        index index.html;
        try_files $uri $uri/ =404;
    }

    # ----------------------------------------
    # Admin panel (protected by htpasswd)
    # ----------------------------------------
    location /sn_admin/ {
        auth_basic "SkyNetCMS Admin";
        auth_basic_user_file /data/.htpasswd;

        # Serve admin placeholder (will proxy to OpenCode in M3)
        alias /data/admin/;
        index index.html;
        try_files $uri $uri/ =404;
    }
}
